<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Max-Sum: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Max-Sum
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Max-Sum Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#intro">Overview</a></li>
<li class="level1"><a href="#usage">Library Organisation</a></li>
<li class="level1"><a href="#function_usage">The DiscreteFunction Class</a><ul><li class="level2"><a href="#function_construction">Construction</a></li>
<li class="level2"><a href="#function_access">Element Access</a></li>
<li class="level2"><a href="#math_ops">Mathematical Operations</a><ul><li class="level3"><a href="#scalar_ops">Scalar Operations</a></li>
<li class="level3"><a href="#domain_ops">Domain Operations</a></li>
<li class="level3"><a href="#arithmetic_ops">Arithmetic Operations</a></li>
</ul>
</li>
<li class="level2"><a href="#comparision_ops">Comparison Operations</a></li>
<li class="level2"><a href="#misc_ops">Miscellaneous Operations</a></li>
</ul>
</li>
<li class="level1"><a href="#domainIterator">The DomainIterator Class</a></li>
<li class="level1"><a href="#maxsumcontroller">The MaxSumController Class</a></li>
<li class="level1"><a href="#tips">Tips on Writing Efficient Code</a></li>
<li class="level1"><a href="#futurework">Future Work</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Overview</h1>
<p>This library provides an implementation of the max-sum algorithm in C++. For more details about the purpose and theory behind this algorithm, please see <a href="http://eprints.soton.ac.uk/265159/">http://eprints.soton.ac.uk/265159/</a></p>
<p>To source code for this library can be dowloaded from <a href="https://github.com/lteacy/maxsum-cpp">here</a>.</p>
<h1><a class="anchor" id="usage"></a>
Library Organisation</h1>
<p>The contents of this library are organised into two main namespaces: </p>
<ul>
<li><a class="el" href="namespacemaxsum.html" title="Namespace for all public types and functions defined by the Max-Sum library.">maxsum</a>, which contains all functions and classes that form part the public iterface to this library; and </li>
<li><a class="el" href="namespacemaxsum_1_1util.html" title="Utility namespace for types used for maxsum library implementation.">maxsum::util</a>, which contains utility code that forms part of the library implementation.</li>
</ul>
<p>Our intention here is that only functions and types that are of direct interest to third party developers should be located in the <a class="el" href="namespacemaxsum.html" title="Namespace for all public types and functions defined by the Max-Sum library.">maxsum</a> namespace. In contrast, those in the <a class="el" href="namespacemaxsum_1_1util.html" title="Utility namespace for types used for maxsum library implementation.">maxsum::util</a> interface are not intended to form part of the public interface to the library, and so should only be of interest to developers intended to extend or modify this library.</p>
<p>Of the classes in the maxsum namespace, three provide the bulk of the library's functionality, and should be of particular interest to anyone wishing to apply the max-sum algorithm: </p>
<ul>
<li><a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a>, which is used to represent mathematical functions that depend on the cartesian product of a set of variables with finite domains; </li>
<li><a class="el" href="classmaxsum_1_1_domain_iterator.html" title="This class provides methods for iterating over the Cartesian product for a set of variable domains...">maxsum::DomainIterator</a>, which provides methods for iterating over the domain of <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> objects; and </li>
<li><a class="el" href="classmaxsum_1_1_max_sum_controller.html" title="This class maintains a factor graph and implements the max-sum algorithm.">maxsum::MaxSumController</a>, which operates on a <em>factor</em> <em>graph</em>, to optimise the values assigned to a set of (action) variables.</li>
</ul>
<p>The following sections describe each of these classes in more detail, together with example extracts of code to demonstrate their proper use.</p>
<h1><a class="anchor" id="function_usage"></a>
The DiscreteFunction Class</h1>
<p>The <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> class is the main workhorse of the maxsum library, which not only provides a way to represent mathematical functions, but also to manipulate their values, and combine them using various mathematical operators to form new functions. As the class name suggests, the main limitation is that only functions with a finite domain can be represented, values of which are stored internally for each possible value of a function's domain.</p>
<p>In future versions, we may provide other classes which can be used to represent functions with continuous domains. However, for now, the DiscreteFunction class provides all the operations necessary to apply the max-sum algorithm to finite domains. In particular, the following subsections describe the main operations that can be performed using this class.</p>
<h2><a class="anchor" id="function_construction"></a>
Construction</h2>
<p>The domain of each <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> is specified by a set of variables, identified by ids of type <a class="el" href="namespacemaxsum.html#a572e59b0c017dac30927fc445aa28216" title="Type used for uniquely identifying variables.">maxsum::VarID</a>. Each variables, <code>k</code>, is associated with a fixed domain size, <img class="formulaInl" alt="$N_k$" src="form_3.png"/>, which must be registered before the variable is used, and must remain the same through a program's execution. Once registered, a variable can then take on any integer value in the range <img class="formulaInl" alt="$[0,N_k]$" src="form_4.png"/>. For example, to create a DiscreteFunction that depends on a single variable, <code>2</code>, we may execute the following code: </p>
<pre>
<a class="el" href="namespacemaxsum.html#a373fa742a9678cc654e76384cb04d7b0" title="Registers a variable with a specified domain size.">maxsum::registerVariable</a> (2, 10);
<a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> func(2,3.2);
</pre><p> Here, variable <code>2</code> is registered with domain size <code>10</code>, which means that it can take on values in the range <img class="formulaInl" alt="$[0,9]$" src="form_5.png"/>. The 2nd parameter of this constructor is used to initialise all values for this function to a specific value, in this case 3.2. So, for example, we have </p>
<pre>
num = func.noVars(); // num == 1 (depends on one variable only)
siz = func.domainSize(); // siz == 10
val = func(0);  // val == 3.2
...
val = func(9);  // val == 3.2
val = func(10); // result undefined!!
</pre><p> In addition to depending on a single value, DiscreteFunction's can also depend on multiple variables, or the empty set. In the latter, case the function encapsulates a single scalar constant, which does not depend on any variable, and is index by 0: </p>
<pre>
<a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> func(4.5); // depends on no variables
num = func.noVars();     // num==0 (depends on no variables)
siz = func.domainSize(); // siz==1 (has only one value)
val = func(0); // val == 4.5
val = func(1); // result undefined!!
</pre><p> For the former case, there are several options for defining functions that depend on several variables. In particular, we can achieve this by passing a list of variable ids to the constructor using iterators. For example: </p>
<pre>
<a class="el" href="namespacemaxsum.html#a572e59b0c017dac30927fc445aa28216" title="Type used for uniquely identifying variables.">maxsum::VarID</a> vars[] = {1,4,8}; // array of size 3
<a class="el" href="namespacemaxsum.html#a2703843fa0f76002b3285d94f1693d26" title="Integer type used for indexing coefficient values.">maxsum::ValIndex</a> siz[] = {5,10,15}; // var 1 has domain size 5 etc.
<a class="el" href="namespacemaxsum.html#a18bbaee58df9fdda98966952ad990c85" title="Register a list of variables with specified domain sizes.">maxsum::registerVariables</a> (vars,vars+3,siz,size+3);
<a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> func(vars,vars+3); // values initialised to 0
num = func.noVars(); // num=3 (depends on three variables)
siz = func.domainSize(); // siz=5*10*15 (size of cartesian product)
val = func(0);   // val == 0
val = func(749); // val == 0 (see below for full explanation)
val = func(750); // result undefined!!
</pre><p> In addition to these, other constructors include a copy constructor and matching assignment operator; and a default constructor, which creates a function that depends on no variables and has a single value of 0. For details, see the manual page for <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a>.</p>
<h2><a class="anchor" id="function_access"></a>
Element Access</h2>
<p>As demonstrated in the examples above, the basic and most efficient way to access the values of a function, is to pass a single integer value to the overloaded () operator. This single integer value acts like a linear index for N-D arrays in matlab, except that values start from 0 rather than 1. Moreover, all versions of the () operator return references to values in a DiscreteFunction, and so can be used for setting as well as reading values. For example, the following code is valid. </p>
<pre>
func(1) = 3.45; // set func(1) to 3.45
val = func(1);  // val == 3.45
</pre><p>As in matlab, or indeed any scheme for indexing N-D arrays, these linear indices depend on the order in which each dimension is stored in memory. In our case, each variable in a function's domain corresponds to a dimension in an N-D array, with variables ordered from least to most significant according to their ID. For example, if <code>func</code> depends on variables 3 and 5 with corresponding domain sizes 2 and 3, then we have the following correspondence between variable values and linear indices: </p>
<table class="doxtable">
<tr>
<th>Variable 3</th><th>Variable 5</th><th>Linear Index </th></tr>
<tr>
<td>0</td><td>0</td><td>0 </td></tr>
<tr>
<td>1</td><td>0</td><td>1 </td></tr>
<tr>
<td>0</td><td>1</td><td>2 </td></tr>
<tr>
<td>1</td><td>1</td><td>3 </td></tr>
<tr>
<td>0</td><td>2</td><td>4 </td></tr>
<tr>
<td>1</td><td>2</td><td>5 </td></tr>
</table>
<p>Here, notice how variable 3, having the smalled variable id, is incremented first, before the variable with the next largest id, which is 5. The situation is the same for variables with more than two variables: the variable with the smallest id is incremented first, and so on until the variable with the highest id, which is incremented last.</p>
<p>Although the most efficient way to access elements using linear indices, these are often not available, and so must be calculated from a set of subindices, relating to named variables. For this reason, several other versions of the () operator are available that except subindices. For example, if variable names and values are stored in lists, s.t. the kth index gives the value for the kth variable, then we can access elements as follows. </p>
<pre>
<a class="el" href="namespacemaxsum.html#a572e59b0c017dac30927fc445aa28216" title="Type used for uniquely identifying variables.">maxsum::VarID</a> vars[] = {1,4,8}; // array of size 3
<a class="el" href="namespacemaxsum.html#a2703843fa0f76002b3285d94f1693d26" title="Integer type used for indexing coefficient values.">maxsum::ValIndex</a> siz[] = {5,10,15}; // var 1 has domain size 5 etc.
<a class="el" href="namespacemaxsum.html#a18bbaee58df9fdda98966952ad990c85" title="Register a list of variables with specified domain sizes.">maxsum::registerVariables</a> (vars,vars+3,siz,size+3);
<a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> func(vars,vars+3); // values initialised to 0</pre><pre>std::vector&lt;VarID&gt; varVec(vars,vars+3); // copy ids into vector
std::vector&lt;ValIndex&gt; valVec(3); // vector of size 3
valVec[0] = 2; // index value for variable 1
valVec[1] = 4; // index value for variable 4
valVec[2] = 5; // index value for variable 8</pre><pre> // THE FOLLOWING STATEMENTS ALL ACCESS THE SAME ELEMENT
int linearIndex = 2+4*10+5*15*10; // corresponding linear index
func(2,4,5); // specify indices in order of variable id
func(valVec.begin(),valVec.end()); // indices in order of variable id
func(linearIndex); // access by corresponding linear index
func(varVec,valVec); // access by named variables in lists (does not work for arrays)
func(vars,vars+3,valVec.begin(),valVec.end()); // access by named variables using iterators
func(varVec.begin(),varVec.end(),valVec.begin(),valVec.end()); 
</pre><p> Here, the last three variants all work by specifying named variables and corresponding values in lists, either by passing reference to containers directly (which must supply interfaces consistent with standard library containers), or by passing iterators to such lists. In each case, the kth value is assumed to correspond to the kth named variable. Any values specified for variables that are not in the functions domain are ignored.</p>
<p>For some versions of the () operator, the member function <a class="el" href="classmaxsum_1_1_discrete_function.html#a7cc147d43c4e523d54a0601150e1954b" title="Access coefficient using scalar index.">maxsum::DiscreteFunction::at</a> is also provided for convenient element access through pointers. For example, the following code is valid: </p>
<pre>
<a class="el" href="namespacemaxsum.html#a373fa742a9678cc654e76384cb04d7b0" title="Registers a variable with a specified domain size.">maxsum::registerVariable</a> (3,5);
<a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> func(3,4.5);
<a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a>* pFunc = &amp;func;
val = (*pFunc)(2);  // works, but ugly
val = pFunc-&gt;at(2); // equivalent, but more readable
</pre><h2><a class="anchor" id="math_ops"></a>
Mathematical Operations</h2>
<p>Three main types of mathematical operation are provided by the <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> class: </p>
<ul>
<li><em>scalar</em> operations, which return a single scalar value based on all values for a <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a> across its domain; </li>
<li><em>domain</em> operations, which expand or reduce the domain of a single function; and </li>
<li><em>arithmetic</em> operations, which combine one or more functions to form a new <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a>.</li>
</ul>
<p>We describe each of these in turn below. </p>
<h3><a class="anchor" id="scalar_ops"></a>
Scalar Operations</h3>
<p>The main purpose of scalar operations is to calculate specific statistics about a function's values over its domain. The table below summarises the available scalar operations, together with their mathematical definition w.r.t. a <a class="el" href="classmaxsum_1_1_discrete_function.html" title="Class representing functions of sets of variables with discrete domains.">maxsum::DiscreteFunction</a>, <img class="formulaInl" alt="$f$" src="form_6.png"/>, with linear indices 1 to <code>N</code>.</p>
<table class="doxtable">
<tr>
<th>Member Function</th><th>Definition </th></tr>
<tr>
<td><a class="el" href="classmaxsum_1_1_discrete_function.html#af23096f6b1f8460b5899367ca5cf16ce" title="Returns the mean scalar value for function across entire domain.">maxsum::DiscreteFunction::mean</a></td><td><img class="formulaInl" alt="$\frac{1}{N} \sum_{k=1}^N f(k)$" src="form_9.png"/> </td></tr>
<tr>
<td><a class="el" href="classmaxsum_1_1_discrete_function.html#a8808e251912f0bb3ad768948b754a3f4" title="Returns the maximum scalar value for function across entire domain.">maxsum::DiscreteFunction::max</a></td><td><img class="formulaInl" alt="$\max_k f(k)$" src="form_10.png"/> </td></tr>
<tr>
<td><a class="el" href="classmaxsum_1_1_discrete_function.html#ab1391246a7b2b192fdab3400d2e36407" title="Returns the minimum scalar value of the function across entire domain.">maxsum::DiscreteFunction::min</a></td><td><img class="formulaInl" alt="$\min_k f(k)$" src="form_11.png"/> </td></tr>
<tr>
<td><a class="el" href="classmaxsum_1_1_discrete_function.html#a949b94c6527b4115a92357adc249a3a8" title="Returns the maxnorm for this function.">maxsum::DiscreteFunction::maxnorm</a></td><td><img class="formulaInl" alt="$\max_k |f(k)|$" src="form_12.png"/> </td></tr>
</table>
<h3><a class="anchor" id="domain_ops"></a>
Domain Operations</h3>
<h3><a class="anchor" id="arithmetic_ops"></a>
Arithmetic Operations</h3>
<h2><a class="anchor" id="comparision_ops"></a>
Comparison Operations</h2>
<h2><a class="anchor" id="misc_ops"></a>
Miscellaneous Operations</h2>
<h1><a class="anchor" id="domainIterator"></a>
The DomainIterator Class</h1>
<p>Todo.</p>
<h1><a class="anchor" id="maxsumcontroller"></a>
The MaxSumController Class</h1>
<p>Todo.</p>
<h1><a class="anchor" id="tips"></a>
Tips on Writing Efficient Code</h1>
<p>Todo.</p>
<h1><a class="anchor" id="futurework"></a>
Future Work</h1>
<p>Although the basic implementation of this library is now complete, this project is still under going its first phase of active development. Accurate results are thus not yet guarranteed, and in fact, bugs are very much still to be expected.</p>
<p>For now, our main priority is thus continued testing and debugging. Beyond that, we also plan to look at various options for optimising the code. For example, one option is to link to the <a href="http://eigen.tuxfamily.org">eigen3</a> linear algebra library, to take advantage of its hardware vectorisation.</p>
<p>We will also continue to improve this documentation of the API. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 1 2012 21:16:07 for Max-Sum by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
